{% import "../device-modal/index.njk" as deviceModal %}
{% import "../room-info-modal/index.njk" as infoModal %}

{% macro render(common, workspaces, devicesByRoom, vendorDevicesByRoom, devices) %}
  <div class="ws-room-view ws-displayNone">
    <div class="ws-room-background-image-container">
        {%- for workspaceId in common.orderedWorkspaceIds %}
        {{roomViewBG(workspaces[workspaceId].background, common.sizeClasses, "ws-default-room-bg " + workspaceId + "-room-bg")}}
            {%- for room in workspaces[workspaceId].rooms %}
                {{roomViewBG(room.background, common.sizeClasses, "ws-room-bg " + workspaceId + "-" + room.slug + "-room-bg")}}
            {%- endfor %}
        {%- endfor %}
    </div>
    <div class="ws-room-content">
      <div class="ws-more-rooms-text awaits-styling">
        <button class="ws-show-more-rooms">{{ common.moreRoomsCtaText }}</button>
      </div>

      <div class="ws-workspaces-rooms">
        <span class="ws-select-room-text">{{ common.selectRoomText }}</span>

        {# This represents the room label and selection interface for each workspace. #}
        <div class="ws-workspaces">
          {%- for workspaceId in common.orderedWorkspaceIds %}
            <div class="ws-workspace ws-displayNone" id="{{ workspaceId }}Container">
                <div class="swiper">
                    <div class="swiper-wrapper">
              {%- for room in workspaces[workspaceId].rooms %}

                <div class="ws-room swiper-slide">
                  <!--<div class="ws-room-label">{{ room.name }}</div>-->

                  {{ roomSelections(workspaces[workspaceId], room, common) }}

                  <!--{{ deviceModal.render(common, workspaces[workspaceId], room, devicesByRoom, devices) }}-->

                  <!--{{ infoModal.render(common, workspaces[workspaceId], room, vendorDevicesByRoom, devices) }}-->
                </div>
              {%- endfor %}
                    </div>
                </div>
            </div>
          {%- endfor %}
        </div>

      </div>
    </div>
  </div>
{% endmacro %}

{% macro roomViewBG(src, sizeClasses, class, id) %}
  {% for size, prefix in sizeClasses %}
    <div class="ws-room-background-image {{ size }} {{class}} ws-displayNone">{% imagesync prefix+src, "" %}</div>
  {% endfor %}
{% endmacro %}

{% macro roomOptionBG(src, sizeClasses) %}
  {% for size, prefix in sizeClasses %}
    {% imagesync prefix+src, "", "", "ws-room-option-image {{ size }}" %}
  {% endfor %}
{% endmacro %}

{% macro roomSelections(workspace, room, common) %}
  <div class="ws-room-selections" id="{{ workspace.slug }}-{{ room.slug }}">
    <div class="ws-room-selection">
      <a href="#/{{ workspace.slug }}/{{ room.slug }}">
        <div class="ws-room-image">{{ roomOptionBG(room.background, common.sizeClasses) }}</div>
        <div class="ws-room-label">{{ room.name }}</div>
      </a>
    </div>
  </div>
{% endmacro %}
