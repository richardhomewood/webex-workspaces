
{% macro render(common, workspaceId, roomId, softwareByRoom, software) %}

    {% for softwareId in softwareByRoom[workspaceId][roomId] %}

        {% if loop.first %}
            <div class="ws-software-section">
        {% endif %}

        {% if softwareByRoom[workspaceId][roomId].length % 2 != 0 and loop.last %}
            {{softwareItem(software[softwareId], common, true)}}
        {% else %}
            {{softwareItem(software[softwareId], common)}}
        {% endif %}

        {% if loop.last %}
            </div>
        {% endif %}

    {% endfor %}
{% endmacro %}

{% macro categoryPageImage(softwareId, altText, shape) %}
  {% set imagePath = "category-page/" + softwareId + "-" + shape + ".jpg" %}
  {% set classname = "ws-" + shape %}
  {%  if shape === "wide" %}
    {% set sizes = "100vw" %}
  {% else %}
    {% set sizes = "(max-width: 1365px) 100vw, 50vw" %}
  {% endif %}
  <div class="ws-category-page-image {{ classname }}">
    {% imagesync imagePath, altText, "", "", true, sizes %}
  </div>
{% endmacro %}

{% macro softwareItem(software, common, isOddEnd = false) %}
     <div class="ws-software{% if isOddEnd %} oddEnd{% endif %}">
        {% if isOddEnd %}
            {# Square is hidden at large breakpoints, wide is hidden at small, ones. #}
            {{ categoryPageImage(software.id, software.categoryPage.altText, "square") }}
            {{ categoryPageImage(software.id, software.categoryPage.altText, "wide") }}
            <div class="ws-oddEndWrapper">
                <div class="ws-oddEndWrapper-column">
                    <h3>{{ software.name }}</h3>
                    <div class="ws-software-description">{{ software.description }}</div>
                </div>
                <div class="ws-oddEndWrapper-column">
                    {{features(software.features, software.featuresTitle)}}
                    {{ softwareCTAs(software.url, common)}}
                </div>
            </div>
        {% else %}
            {{ categoryPageImage(software.id, software.categoryPage.altText, "square") }}
            <div class="ws-software-content">
                <h3>{{ software.name }}</h3>
                <div class="ws-software-description">{{ software.description }}</div>

                {{features(software.features, software.featuresTitle)}}
                {{ softwareCTAs(software.url, common)}}
            </div>
        {% endif %}
     </div>
{% endmacro %}

{% macro features(features, title) %}
    {% for feature in features %}
        {% if loop.first %}
            <h4 class="ws-software-features-title">{{title}}</h4>
            <ul class="ws-software-features">
        {% endif %}

        <li class="ws-software-feature">{{ feature }}</li>

    {% if loop.last %}</ul>{% endif %}

    {% endfor %}
{% endmacro %}

{% macro softwareCTAs(url, common) %}
    <a class="ws-learn-more-cta ws-cta ws-transparent-cta ws-on-dark-background" href="{{ url }}"><span>{{ common.learnMoreCtaText }}</span></a>
    <a class="ws-contact-cta ws-cta ws-white-cta ws-on-dark-background" target="_blank" href="{{ common.contactUrl }}" ><span>{{ common.contactCtaText }}</span></a>
{% endmacro %}
